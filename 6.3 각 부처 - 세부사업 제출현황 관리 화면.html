<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶€ì²˜ ì´ê´„ - ì„¸ë¶€ì‚¬ì—… ì œì¶œí˜„í™© ê´€ë¦¬</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        /* ì°¨ìˆ˜ ì„ íƒ ì„¹ì…˜ */
        .period-selector {
            background: #f8fafc;
            border: 2px solid #1e40af;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .selector-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .selector-dropdown {
            padding: 8px 12px;
            border: 2px solid #1e40af;
            border-radius: 6px;
            font-weight: bold;
            color: #1e40af;
            background: white;
        }
        
        /* ë¶€ì²˜ ìƒíƒœ í‘œì‹œ */
        .ministry-status {
            background: #dbeafe;
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .ministry-status h3 {
            color: #1e40af;
            margin-bottom: 5px;
        }
        
        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-writing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-ready {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-submitted {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 14px;
        }
        
        .projects-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .projects-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .projects-table th,
        .projects-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .projects-table th {
            background: #f3f4f6;
            font-weight: bold;
            color: #374151;
        }
        
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-large {
            padding: 15px 30px;
            font-size: 16px;
        }
        
        /* ë¶€ì²˜ ì´ê´„ ì œì¶œ ì„¹ì…˜ */
        .ministry-submission {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .submission-header {
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .textarea-field {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }
        
        .submission-info {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .submission-actions {
            text-align: center;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- í—¤ë” -->
            <div class="header">
                <div class="header-top">
                    <div>
                        <h1>ğŸ›ï¸ êµ­í† êµí†µë¶€ ì´ê´„ - ì„¸ë¶€ì‚¬ì—… ê´€ë¦¬</h1>
                        <p>ë„ì‹œê³„íšê³¼ | ê¹€ì •ìˆ˜ ê³¼ì¥</p>
                    </div>
                    <div class="ministry-status">
                        <h3>ë¶€ì²˜ ì œì¶œ ìƒíƒœ</h3>
                        <span :class="getMinistryStatusClass()">{{ getMinistryStatusText() }}</span>
                    </div>
                </div>
                
                <!-- ì°¨ìˆ˜ ì„ íƒ ì„¹ì…˜ -->
                <div class="period-selector">
                    <div class="selector-group">
                        <label style="font-weight: bold; color: #1e40af;">ğŸ“… ëŒ€ìƒì—°ë„:</label>
                        <select v-model="selectedYear" @change="loadYearData" class="selector-dropdown">
                            <option value="2024">2024ë…„</option>
                            <option value="2023">2023ë…„</option>
                            <option value="2022">2022ë…„</option>
                        </select>
                    </div>
                    <div class="selector-group">
                        <label style="font-weight: bold; color: #1e40af;">ğŸ”„ ì°¨ìˆ˜:</label>
                        <select v-model="selectedRound" @change="loadRoundData" class="selector-dropdown">
                            <option value="1">1ì°¨</option>
                            <option value="2">2ì°¨</option>
                            <option value="3">3ì°¨</option>
                            <option value="4">4ì°¨</option>
                        </select>
                    </div>
                    <div style="color: #6b7280;">
                        ë§ˆê°ì¼: {{ getDeadlineText() }}
                    </div>
                </div>
            </div>
            
            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" style="color: #6366f1;">{{ projects.length }}</div>
                    <div class="stat-label">ì´ ì„¸ë¶€ì‚¬ì—… ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #10b981;">{{ getAssignedCount() }}</div>
                    <div class="stat-label">ë‹´ë‹¹ì ë°°ì • ì™„ë£Œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #059669;">{{ getSubmittedCount() }}</div>
                    <div class="stat-label">ì„¸ë¶€ì‚¬ì—… ì œì¶œ ì™„ë£Œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #f59e0b;">{{ getWorkingCount() }}</div>
                    <div class="stat-label">ì‘ì—… í•„ìš”</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #ef4444;">D-{{ getDaysRemaining() }}</div>
                    <div class="stat-label">{{ selectedRound }}ì°¨ ë§ˆê°</div>
                </div>
            </div>
            
            <!-- ì„¸ë¶€ì‚¬ì—… ëª©ë¡ -->
            <div class="projects-section">
                <h2>ğŸ“ ë¶€ì²˜ ì„¸ë¶€ì‚¬ì—… ê´€ë¦¬ ({{ selectedYear }}ë…„ {{ selectedRound }}ì°¨)</h2>
                
                <table class="projects-table">
                    <thead>
                        <tr>
                            <th>ìˆœë²ˆ</th>
                            <th>ì‚¬ì—…ì½”ë“œ</th>
                            <th>ì„¸ë¶€ì‚¬ì—…ëª…</th>
                            <th>ì˜ˆì‚°ì•¡(ë°±ë§Œì›)</th>
                            <th>ë‹´ë‹¹ì</th>
                            <th>ìƒíƒœ</th>
                            <th>ì•¡ì…˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(project, index) in projects" :key="project.id">
                            <td>{{ index + 1 }}</td>
                            <td>{{ project.code }}</td>
                            <td style="font-weight: bold;">{{ project.name }}</td>
                            <td>{{ project.budget.toLocaleString() }}</td>
                            <td :style="{color: project.manager ? '#374151' : '#ef4444'}">
                                {{ project.manager || 'ë¯¸ë°°ì •' }}
                            </td>
                            <td>
                                <span :class="getProjectStatusClass(project.status)">{{ project.status }}</span>
                            </td>
                            <td>
                                <button v-if="!project.manager" class="btn btn-primary" @click="assignManager(project)">
                                    ğŸ‘¤ ë‹´ë‹¹ì ë°°ì •
                                </button>
                                <button v-if="project.manager" class="btn btn-warning" @click="changeManager(project)">
                                    ğŸ”„ ë‹´ë‹¹ì ë³€ê²½
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- ë¶€ì²˜ ì´ê´„ ì œì¶œ ì„¹ì…˜ -->
            <div class="ministry-submission">
                <div class="submission-header">
                    <h2>ğŸ›ï¸ ë¶€ì²˜ ì´ê´„ ì œì¶œ</h2>
                    <p>ëª¨ë“  ì„¸ë¶€ì‚¬ì—…ì´ ì œì¶œëœ í›„ ë¶€ì²˜ ê°œìš”ë¥¼ ì‘ì„±í•˜ì—¬ ìµœì¢… ì œì¶œí•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="submission-info">
                    <strong>ğŸ“Š ì œì¶œ í˜„í™©:</strong> {{ getSubmittedCount() }}/{{ projects.length }} ì„¸ë¶€ì‚¬ì—… ì œì¶œ ì™„ë£Œ
                    <br>
                    <strong>â° ë¶€ì²˜ ì œì¶œ ë§ˆê°:</strong> {{ getMinistryDeadlineText() }}
                    <br>
                    <strong>ğŸ“ ë¶€ì²˜ ìƒíƒœ:</strong> {{ getMinistryStatusText() }}
                </div>
                
                <!-- ë¶€ì²˜ ê°œìš” ì‘ì„± -->
                <div v-if="canWriteMinistryOverview()">
                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">
                        ğŸ“ ë¶€ì²˜ ì´ê´„ ê°œìš” ì‘ì„±
                    </label>
                    <textarea 
                        v-model="ministryOverview" 
                        class="textarea-field"
                        placeholder="ë¶€ì²˜ ì´ê´„ ê°œìš”ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.
ì˜ˆì‹œ:
- ì˜¨ì‹¤ê°€ìŠ¤ ê°ì¶• ëª©í‘œ ë° ì¶”ì§„ ë°©í–¥
- ë¶€ì²˜ë³„ ì£¼ìš” ì •ì±… ì—°ê³„ì„±
- ì„¸ë¶€ì‚¬ì—… ê°„ ì‹œë„ˆì§€ íš¨ê³¼
- ê¸°ëŒ€ íš¨ê³¼ ë° ì„±ê³¼ ì§€í‘œ"
                    ></textarea>
                </div>
                
                <!-- ì œì¶œëœ ë¶€ì²˜ ê°œìš” ë³´ê¸° -->
                <div v-if="ministrySubmissionStatus === 'submitted'">
                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">
                        ğŸ“‹ ì œì¶œëœ ë¶€ì²˜ ì´ê´„ ê°œìš”
                    </label>
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        {{ ministryOverview }}
                    </div>
                    <p style="color: #6b7280; font-size: 12px; margin-top: 10px;">
                        ì œì¶œì¼: {{ ministrySubmissionDate }}
                    </p>
                </div>
                
                <div class="submission-actions">
                    <!-- ì œì¶œ ê°€ëŠ¥ ìƒíƒœ -->
                    <div v-if="canSubmitMinistry()">
                        <p style="color: #059669; margin-bottom: 15px; font-weight: bold;">
                            âœ… ëª¨ë“  ì„¸ë¶€ì‚¬ì—… ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¶€ì²˜ ì´ê´„ ì œì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                        </p>
                        <button class="btn btn-success btn-large" @click="submitMinistry()">
                            ğŸ›ï¸ ë¶€ì²˜ ì´ê´„ ì œì¶œ ({{ getSubmittedCount() }}/{{ projects.length }})
                        </button>
                    </div>
                    
                    <!-- ì œì¶œ ë¶ˆê°€ ìƒíƒœ -->
                    <div v-else-if="ministrySubmissionStatus === 'writing'">
                        <p style="color: #f59e0b; margin-bottom: 15px;">
                            â³ ì„¸ë¶€ì‚¬ì—… ì œì¶œ ì§„í–‰ì¤‘... ({{ getSubmittedCount() }}/{{ projects.length }})
                        </p>
                        <p style="color: #6b7280; font-size: 14px;">
                            ëª¨ë“  ì„¸ë¶€ì‚¬ì—…ì´ ì œì¶œëœ í›„ ë¶€ì²˜ ì´ê´„ ì œì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                    
                    <!-- ì´ë¯¸ ì œì¶œë¨ -->
                    <div v-else-if="ministrySubmissionStatus === 'submitted'">
                        <p style="color: #3b82f6; margin-bottom: 15px; font-weight: bold;">
                            âœ… ë¶€ì²˜ ì´ê´„ ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
                        </p>
                        <p style="color: #6b7280; font-size: 14px;">
                            í™˜ê²½ê³µë‹¨ì—ì„œ ê²€í†  ì¤‘ì…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                // ì—°ë„/ì°¨ìˆ˜ ì„ íƒ
                const selectedYear = ref('2024');
                const selectedRound = ref('1');
                
                // ë¶€ì²˜ ì œì¶œ ìƒíƒœ ê´€ë¦¬ - ì´ˆê¸°ê°’ì„ 'ready'ë¡œ ë³€ê²½
                const ministrySubmissionStatus = ref('ready'); // writing â†’ readyë¡œ ë³€ê²½
                const ministryOverview = ref('');
                const ministrySubmissionDate = ref('');
                
                const projects = ref([
                    {
                        id: 1,
                        code: 'KT2024-001',
                        name: 'ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì¸í”„ë¼ êµ¬ì¶• ì‚¬ì—…',
                        budget: 15000,
                        status: 'ì œì¶œì™„ë£Œ',
                        manager: 'ì´ì˜í¬'
                    },
                    {
                        id: 2,
                        code: 'KT2024-002',
                        name: 'ì¹œí™˜ê²½ ëŒ€ì¤‘êµí†µ í™•ì¶©',
                        budget: 28000,
                        status: 'ì œì¶œì™„ë£Œ',
                        manager: 'ë°•ì² ìˆ˜'
                    },
                    {
                        id: 3,
                        code: 'KT2024-003',
                        name: 'ë„ì‹œê³µì› ë…¹ì§€ í™•ëŒ€',
                        budget: 8500,
                        status: 'ì œì¶œì™„ë£Œ',
                        manager: 'ì´ì˜í¬'
                    },
                    {
                        id: 4,
                        code: 'KT2024-004',
                        name: 'ê±´ë¬¼ ì—ë„ˆì§€íš¨ìœ¨ ê°œì„ ',
                        budget: 12000,
                        status: 'ì œì¶œì™„ë£Œ',
                        manager: 'ì •ë¯¼ìˆ˜'
                    },
                    {
                        id: 5,
                        code: 'KT2024-005',
                        name: 'ì¬ìƒì—ë„ˆì§€ ë°œì „ì†Œ ê±´ì„¤',
                        budget: 45000,
                        status: 'ì œì¶œì™„ë£Œ',
                        manager: 'ìµœì§€ì˜'
                    }
                ]);

                const getAssignedCount = () => {
                    return projects.value.filter(p => p.manager && p.manager.trim() !== '').length;
                };

                const getSubmittedCount = () => {
                    return projects.value.filter(p => p.status === 'ì œì¶œì™„ë£Œ' || p.status === 'ê²€í† ì¤‘').length;
                };

                const getWorkingCount = () => {
                    return projects.value.filter(p => p.status === 'ì‘ì„±ì¤‘' || p.status === 'ì¬ì‘ì„±í•„ìš”').length;
                };

                const getDaysRemaining = () => {
                    return 11; // ì„ì‹œë¡œ 11ì¼ë¡œ ì„¤ì •
                };

                const getDeadlineText = () => {
                    return '2024.12.31 (í™”)';
                };

                const getMinistryDeadlineText = () => {
                    return '2025.01.05 (ì¼)';
                };

                // ë¶€ì²˜ ì œì¶œ ìƒíƒœ ê´€ë ¨ í•¨ìˆ˜ë“¤ - ì¡°ê±´ ê°„ì†Œí™”
                const canSubmitMinistry = () => {
                    return getSubmittedCount() === projects.value.length && ministrySubmissionStatus.value !== 'submitted';
                };

                const canWriteMinistryOverview = () => {
                    return getSubmittedCount() === projects.value.length && ministrySubmissionStatus.value !== 'submitted';
                };

                const getMinistryStatusText = () => {
                    if (getSubmittedCount() < projects.value.length) {
                        return 'ì„¸ë¶€ì‚¬ì—… ì‘ì„±ì¤‘';
                    } else if (ministrySubmissionStatus.value === 'submitted') {
                        return 'ë¶€ì²˜ ì œì¶œ ì™„ë£Œ';
                    } else {
                        return 'ë¶€ì²˜ ì œì¶œ ëŒ€ê¸°ì¤‘';
                    }
                };

                const getMinistryStatusClass = () => {
                    const baseClass = 'status-badge ';
                    if (getSubmittedCount() < projects.value.length) {
                        return baseClass + 'status-writing';
                    } else if (ministrySubmissionStatus.value === 'submitted') {
                        return baseClass + 'status-submitted';
                    } else {
                        return baseClass + 'status-ready';
                    }
                };

                const getProjectStatusClass = (status) => {
                    const baseClass = 'status-badge ';
                    if (status === 'ì œì¶œì™„ë£Œ') return baseClass + 'status-ready';
                    if (status === 'ì‘ì„±ì¤‘') return baseClass + 'status-writing';
                    if (status === 'ì¬ì‘ì„±í•„ìš”') return baseClass + 'status-writing';
                    return baseClass + 'status-writing';
                };

                // ì„¸ë¶€ì‚¬ì—… ì œì¶œ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë¶€ì²˜ ìƒíƒœ ì—…ë°ì´íŠ¸
                const updateMinistryStatus = () => {
                    if (getSubmittedCount() === projects.value.length) {
                        if (ministrySubmissionStatus.value === 'writing') {
                            ministrySubmissionStatus.value = 'ready';
                        }
                    } else {
                        if (ministrySubmissionStatus.value === 'ready') {
                            ministrySubmissionStatus.value = 'writing';
                        }
                    }
                };

                const assignManager = (project) => {
                    const newManager = prompt('ë°°ì •í•  ë‹´ë‹¹ìë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì´ì˜í¬, ë°•ì² ìˆ˜, ì •ë¯¼ìˆ˜)');
                    if (newManager && newManager.trim() !== '') {
                        project.manager = newManager.trim();
                        project.status = 'ì‘ì„±ì¤‘';
                        alert(`${project.name}ì˜ ë‹´ë‹¹ìê°€ ${newManager.trim()}ìœ¼ë¡œ ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        updateMinistryStatus();
                    }
                };

                const changeManager = (project) => {
                    const newManager = prompt('ë³€ê²½í•  ë‹´ë‹¹ìë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì´ì˜í¬, ë°•ì² ìˆ˜, ì •ë¯¼ìˆ˜, ë¯¸ë°°ì •)');
                    if (newManager !== null) {
                        if (newManager.trim() === '' || newManager === 'ë¯¸ë°°ì •') {
                            project.manager = '';
                            project.status = 'ë¯¸ë°°ì •';
                            alert(`${project.name}ì˜ ë‹´ë‹¹ìê°€ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        } else {
                            project.manager = newManager.trim();
                            alert(`${project.name}ì˜ ë‹´ë‹¹ìê°€ ${newManager.trim()}ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        }
                        updateMinistryStatus();
                    }
                };

                const submitMinistry = () => {
                    if (!ministryOverview.value.trim()) {
                        alert('ë¶€ì²˜ ì´ê´„ ê°œìš”ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    if (confirm('ë¶€ì²˜ ì´ê´„ ì œì¶œì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì œì¶œ í›„ì—ëŠ” ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.')) {
                        ministrySubmissionStatus.value = 'submitted';
                        ministrySubmissionDate.value = new Date().toLocaleDateString();
                        alert('ë¶€ì²˜ ì´ê´„ ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\ní™˜ê²½ê³µë‹¨ì—ì„œ ê²€í† ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');
                    }
                };

                const loadYearData = () => {
                    console.log(`${selectedYear.value}ë…„ ë°ì´í„° ë¡œë“œ`);
                };

                const loadRoundData = () => {
                    console.log(`${selectedYear.value}ë…„ ${selectedRound.value}ì°¨ ë°ì´í„° ë¡œë“œ`);
                };

                return {
                    selectedYear,
                    selectedRound,
                    projects,
                    ministrySubmissionStatus,
                    ministryOverview,
                    ministrySubmissionDate,
                    getAssignedCount,
                    getSubmittedCount,
                    getWorkingCount,
                    getDaysRemaining,
                    getDeadlineText,
                    getMinistryDeadlineText,
                    canSubmitMinistry,
                    canWriteMinistryOverview,
                    getMinistryStatusText,
                    getMinistryStatusClass,
                    getProjectStatusClass,
                    assignManager,
                    changeManager,
                    submitMinistry,
                    loadYearData,
                    loadRoundData
                };
            }
        }).mount('#app');
    </script>
</body>
</html> 