<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™˜ê²½ê³µë‹¨ ê´€ë¦¬ì - ì˜ˆì‚°ì œ ê¸°ì´ˆ ë°ì´í„° êµ¬ì¶•</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* í—¤ë” */
        .admin-header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left h1 {
            font-size: 24px;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 8px;
        }
        
        /* ë‹¨ê³„ë³„ íƒ­ */
        .step-tabs {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 30px;
        }
        
        .step-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .step-tab.active {
            background: white;
            color: #1e3c72;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 20px;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input, .form-select {
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }
        
        /* ì°¨ìˆ˜ ì„¤ì • í…Œì´ë¸” */
        .round-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .round-table th, .round-table td {
            padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb;
        }
        .round-table th { background: #f9fafb; font-weight: bold; color: #374151; }

        /* ì„¸ë¶€ì‚¬ì—… ë§¤í•‘ 2ë‹¨ ë ˆì´ì•„ì›ƒ */
        .mapping-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
        }
        .ministry-list { max-height: 600px; overflow-y: auto; }
        .ministry-item {
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .ministry-item:hover { background-color: #f9fafb; }
        .ministry-item.active {
            background-color: #e0f2fe;
            border-color: #0284c7;
        }
        
        /* ì„¸ë¶€ì‚¬ì—… ë§¤í•‘ í…Œì´ë¸” */
        .mapping-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .mapping-table th,
        .mapping-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .mapping-table th {
            background: #f9fafb;
            font-weight: bold;
            color: #374151;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #1e3c72;
            color: white;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* í† ê¸€ ìŠ¤ìœ„ì¹˜ */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2196F3;
        }
        input:checked + .slider:before {
            transform: translateX(22px);
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- í—¤ë” -->
            <div class="admin-header">
                <div class="header-content">
                    <div class="header-left">
                        <h1>ğŸ—ï¸ ì˜ˆì‚°ì œ ê¸°ì´ˆ ë°ì´í„° êµ¬ì¶• ì‹œìŠ¤í…œ</h1>
                        <p>ì˜¨ì‹¤ê°€ìŠ¤ê°ì¶•ì¸ì§€ ì˜ˆì‚°ì œ ìƒì„± ë° ì„¸ë¶€ì‚¬ì—… ë§¤í•‘ ê´€ë¦¬</p>
                    </div>
                    <div class="header-right">
                        <div style="background: #1e3c72; color: white; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600;">
                            í™˜ê²½ê³µë‹¨ ê´€ë¦¬ì
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë‹¨ê³„ë³„ íƒ­ -->
            <div class="step-tabs">
                <button 
                    v-for="(step, index) in steps" 
                    :key="index"
                    :class="['step-tab', { active: currentStep === index }]"
                    @click="currentStep = index"
                >
                    {{ step.title }}
                </button>
            </div>
            
            <!-- 1ë‹¨ê³„: ìƒˆ ì˜ˆì‚°ì œ ìƒì„± -->
            <div v-if="currentStep === 0">
                <div class="card">
                    <h2 class="card-title">
                        âœ¨ 1ë‹¨ê³„: ì˜ˆì‚°ì œ ìƒì„± ë° ì°¨ìˆ˜ ì„¤ì •
                    </h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">íšŒê³„ì—°ë„</label>
                            <select v-model="newBudget.year" class="form-select">
                                <option value="2025">2025ë…„</option>
                                <option value="2026">2026ë…„</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì˜ˆì‚°ì œ ìœ í˜•</label>
                            <select v-model="newBudget.type" class="form-select">
                                <option value="main">ë³¸ì˜ˆì‚°</option>
                                <option value="supplementary">ì¶”ê²½ì˜ˆì‚°</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì˜ˆì‚°ì œ ëª…ì¹­</label>
                            <input v-model="newBudget.name" type="text" class="form-input" placeholder="ì˜ˆ: 2025ë…„ ë³¸ì˜ˆì‚°">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ë‹´ë‹¹ì</label>
                            <input v-model="newBudget.manager" type="text" class="form-input" placeholder="ë‹´ë‹¹ìëª…">
                        </div>
                    </div>

                    <h3 style="margin: 30px 0 15px; color: #333;">ğŸ“… ì°¨ìˆ˜ë³„ ìƒì„¸ ì„¤ì •</h3>
                    <table class="round-table">
                        <thead>
                            <tr>
                                <th>ì°¨ìˆ˜</th>
                                <th>ì‘ì„± ì‹œì‘ì¼</th>
                                <th>ì‘ì„± ì¢…ë£Œì¼</th>
                                <th>ê²€í†  ì‹œì‘ì¼</th>
                                <th>ê²€í†  ì¢…ë£Œì¼</th>
                                <th>ì‘ì„± ê°€ëŠ¥ ì—¬ë¶€</th>
                                <th>ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(round, index) in newBudget.rounds" :key="index">
                                <td><span style="font-weight: bold; font-size: 16px;">{{ round.round }}ì°¨</span></td>
                                <td><input type="date" v-model="round.writeStart" class="form-input"></td>
                                <td><input type="date" v-model="round.writeEnd" class="form-input"></td>
                                <td><input type="date" v-model="round.reviewStart" class="form-input"></td>
                                <td><input type="date" v-model="round.reviewEnd" class="form-input"></td>
                                <td>
                                    <label class="toggle-switch">
                                        <input type="checkbox" v-model="round.enabled">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td>
                                    <button @click="removeRound(index)" class="btn" style="background: #ef4444; color:white; padding: 8px 12px; font-size: 12px;">ì‚­ì œ</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="text-align: center; margin-top: 20px;">
                        <button @click="addRound" class="btn btn-secondary">â• ì°¨ìˆ˜ ì¶”ê°€</button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button @click="goToNextStep" class="btn btn-primary">
                            ä¸‹ä¸€æ­¥ï¼šì„¸ë¶€ì‚¬ì—… ë§¤í•‘ìœ¼ë¡œ ì´ë™ ï¼
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 2ë‹¨ê³„: ì„¸ë¶€ì‚¬ì—… ë§¤í•‘ -->
            <div v-if="currentStep === 1">
                <div class="card">
                    <h2 class="card-title">
                        ğŸ”— 2ë‹¨ê³„: ì„¸ë¶€ì‚¬ì—… ë§¤í•‘
                    </h2>
                    <div class="mapping-layout">
                        <!-- ë¶€ì²˜ ëª©ë¡ -->
                        <div class="ministry-list">
                            <h3 style="margin-bottom: 15px; color: #1e3c72;">ë¶€ì²˜ ëª©ë¡</h3>
                            <div 
                                v-for="ministry in ministries" 
                                :key="ministry.id" 
                                class="ministry-item"
                                :class="{ active: selectedMinistry?.id === ministry.id }"
                                @click="selectMinistry(ministry)">
                                <div style="font-weight: bold; margin-bottom: 5px;">{{ ministry.name }}</div>
                                <div style="font-size: 12px; color: #6b7280;">
                                    ì´ {{ ministry.totalProjects }}ê°œ / ë§¤í•‘ {{ ministry.mappedProjects }}ê°œ
                                </div>
                            </div>
                        </div>

                        <!-- ì„¸ë¶€ì‚¬ì—… ëª©ë¡ -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="color: #1e3c72;">
                                    {{ selectedMinistry ? selectedMinistry.name : 'ì „ì²´' }} ì„¸ë¶€ì‚¬ì—… ëª©ë¡
                                </h3>
                                <div>
                                    <button @click="importPreviousYear" class="btn btn-secondary btn-sm" style="padding: 8px 12px; font-size: 12px;">ğŸ“‚ ì „ë…„ë„ ê°€ì ¸ì˜¤ê¸°</button>
                                    <button @click="addNewProject" class="btn btn-success btn-sm" style="padding: 8px 12px; font-size: 12px;">â• ì‹ ê·œ ì¶”ê°€</button>
                                    <button @click="batchImport" class="btn btn-primary btn-sm" style="padding: 8px 12px; font-size: 12px;">ğŸ“‹ Excel ì—…ë¡œë“œ</button>
                                </div>
                            </div>

                            <div style="max-height: 500px; overflow-y: auto;">
                                <table class="mapping-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>ì‚¬ì—…ì½”ë“œ</th>
                                            <th>ì„¸ë¶€ì‚¬ì—…ëª…</th>
                                            <th>êµ¬ë¶„</th>
                                            <th>ì˜ˆì‚°ì•¡(ì–µì›)</th>
                                            <th>ìƒíƒœ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="project in filteredProjects" :key="project.id">
                                            <td><input type="checkbox"></td>
                                            <td>{{ project.code }}</td>
                                            <td>{{ project.name }}</td>
                                            <td>
                                                <span :style="{ color: project.type === 'ì˜ˆì‚°' ? '#3b82f6' : '#10b981', fontWeight: 'bold' }">
                                                    {{ project.type }}
                                                </span>
                                            </td>
                                            <td>{{ project.budget.toLocaleString() }}</td>
                                            <td>
                                                <span :style="{ 
                                                    background: project.status === 'ë§¤í•‘ì™„ë£Œ' ? '#d1fae5' : '#fef3c7', 
                                                    color: project.status === 'ë§¤í•‘ì™„ë£Œ' ? '#065f46' : '#92400e',
                                                    padding: '4px 8px', borderRadius: '12px', fontSize: '12px', fontWeight: 'bold'
                                                }">
                                                    {{ project.status }}
                                                </span>
                                            </td>
                                        </tr>
                                        <tr v-if="filteredProjects.length === 0">
                                            <td colspan="6" style="text-align: center; padding: 40px; color: #6b7280;">
                                                ì¢Œì¸¡ì—ì„œ ë¶€ì²˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 3ë‹¨ê³„: ìµœì¢… í™•ì¸ -->
            <div v-if="currentStep === 2">
                <div class="card">
                    <h2 class="card-title">
                        âœ… 3ë‹¨ê³„: ìµœì¢… í™•ì¸ ë° ë°°í¬
                    </h2>
                    
                    <div style="background: #f0fdf4; border: 2px solid #10b981; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
                        <h3 style="color: #059669; margin-bottom: 15px;">ğŸ¯ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ</h3>
                        <ul style="color: #047857; line-height: 1.8;">
                            <li>âœ… {{ newBudget.year }}ë…„ {{ newBudget.name }} ì‹œìŠ¤í…œ ìƒì„± ì™„ë£Œ</li>
                            <li>âœ… ì´ {{ newBudget.rounds.length }}ê°œ ì°¨ìˆ˜ ì„¤ì • ì™„ë£Œ</li>
                            <li>âœ… ì´ {{ projects.length }}ê°œ ì„¸ë¶€ì‚¬ì—… ë§¤í•‘ ì™„ë£Œ (ì˜ˆì‚° {{ projects.filter(p => p.type === 'ì˜ˆì‚°').length }}ê°œ / ê¸°ê¸ˆ {{ projects.filter(p => p.type === 'ê¸°ê¸ˆ').length }}ê°œ)</li>
                            <li>âœ… ì „ì²´ {{ ministries.length }}ê°œ ë¶€ì²˜ ì°¸ì—¬</li>
                        </ul>
                    </div>
                    
                    <div style="text-align: center;">
                        <button @click="deployBudgetSystem" class="btn btn-success" style="padding: 20px 40px; font-size: 18px;">
                            ğŸš€ ì˜ˆì‚°ì œ ì‹œìŠ¤í…œ ë°°í¬ ë° ë¶€ì²˜ ì•Œë¦¼ ë°œì†¡
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;
        
        createApp({
            setup() {
                const currentStep = ref(0);
                const steps = ref([
                    { title: '1. ì˜ˆì‚°ì œ/ì°¨ìˆ˜ ì„¤ì •' },
                    { title: '2. ì„¸ë¶€ì‚¬ì—… ë§¤í•‘' },
                    { title: '3. ìµœì¢… í™•ì¸ ë° ë°°í¬' },
                ]);
                
                const newBudget = ref({
                    year: '2025',
                    type: 'main',
                    name: '2025ë…„ ë³¸ì˜ˆì‚°',
                    manager: '',
                    rounds: [
                        { round: 1, writeStart: '', writeEnd: '', reviewStart: '', reviewEnd: '', enabled: true },
                        { round: 2, writeStart: '', writeEnd: '', reviewStart: '', reviewEnd: '', enabled: false },
                    ]
                });

                const addRound = () => {
                    const nextRound = newBudget.value.rounds.length + 1;
                    newBudget.value.rounds.push({
                        round: nextRound, writeStart: '', writeEnd: '', reviewStart: '', reviewEnd: '', enabled: false
                    });
                };

                const removeRound = (index) => {
                    newBudget.value.rounds.splice(index, 1);
                    // ì°¨ìˆ˜ ë²ˆí˜¸ ì¬ì •ë ¬
                    newBudget.value.rounds.forEach((round, i) => {
                        round.round = i + 1;
                    });
                };

                const goToNextStep = () => {
                    if (newBudget.value.rounds.length === 0) {
                        alert('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ì°¨ìˆ˜ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.');
                        return;
                    }
                    currentStep.value = 1;
                };

                const ministries = ref([
                    { id: 1, name: 'êµìœ¡ë¶€', totalProjects: 136, mappedProjects: 130 },
                    { id: 2, name: 'ì‚°ì—…ë¶€', totalProjects: 52, mappedProjects: 50 },
                    { id: 3, name: 'í™˜ê²½ë¶€', totalProjects: 26, mappedProjects: 25 },
                    { id: 4, name: 'êµ­í† ë¶€', totalProjects: 27, mappedProjects: 22 },
                ]);
                const selectedMinistry = ref(null);
                
                const projects = ref([
                    { id: 1, ministryId: 1, code: 'ED2025-001', name: 'ê¸°í›„ëŒ€ì‘ê¸°ê¸ˆ ì¸ì¬ì–‘ì„±', type: 'ê¸°ê¸ˆ', budget: 2276, status: 'ë§¤í•‘ì™„ë£Œ' },
                    { id: 2, ministryId: 2, code: 'MT2025-001', name: 'ì‹ ì¬ìƒì—ë„ˆì§€ í™•ëŒ€', type: 'ì˜ˆì‚°', budget: 1144, status: 'ë§¤í•‘ì™„ë£Œ' },
                    { id: 3, ministryId: 3, code: 'ME2025-001', name: 'í™˜ê²½ë³´ì „ ì‚¬ì—…', type: 'ì˜ˆì‚°', budget: 4309, status: 'ë§¤í•‘ì™„ë£Œ' },
                    { id: 4, ministryId: 4, code: 'LT2025-001', name: 'ì¹œí™˜ê²½ êµí†µì¸í”„ë¼', type: 'ì˜ˆì‚°', budget: 320, status: 'ë§¤í•‘ëŒ€ê¸°' },
                    { id: 5, ministryId: 1, code: 'ED2025-002', name: 'í•™êµ íƒ„ì†Œì¤‘ë¦½ ì‹¤í˜„', type: 'ì˜ˆì‚°', budget: 288, status: 'ë§¤í•‘ì™„ë£Œ' },
                ]);

                const filteredProjects = computed(() => {
                    if (!selectedMinistry.value) {
                        return [];
                    }
                    return projects.value.filter(p => p.ministryId === selectedMinistry.value.id);
                });

                const selectMinistry = (ministry) => {
                    selectedMinistry.value = ministry;
                };
                
                const importPreviousYear = () => alert('ì „ë…„ë„ ì„¸ë¶€ì‚¬ì—…ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.');
                const addNewProject = () => alert('ì‹ ê·œ ì„¸ë¶€ì‚¬ì—… ì¶”ê°€ í¼ì„ ì—½ë‹ˆë‹¤.');
                const batchImport = () => alert('Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ì¼ê´„ ë“±ë¡í•©ë‹ˆë‹¤.');
                
                const deployBudgetSystem = () => {
                    const confirmed = confirm(`${newBudget.value.name} ì‹œìŠ¤í…œì„ ë°°í¬í•˜ê³  ëª¨ë“  ë¶€ì²˜ì— ì•Œë¦¼ì„ ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
                    if (confirmed) {
                        alert('ğŸ‰ ì˜ˆì‚°ì œ ì‹œìŠ¤í…œì´ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        window.location.href = '6. í™˜ê²½ê³µë‹¨ ê´€ë¦¬ì - ì˜ˆì‚°ì œ ëª©ë¡.html';
                    }
                };
                
                return {
                    currentStep,
                    steps,
                    newBudget,
                    addRound,
                    removeRound,
                    goToNextStep,
                    ministries,
                    selectedMinistry,
                    projects,
                    filteredProjects,
                    selectMinistry,
                    importPreviousYear,
                    addNewProject,
                    batchImport,
                    deployBudgetSystem
                };
            }
        }).mount('#app');
    </script>
</body>
</html> 