<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¨ì‹¤ê°€ìŠ¤ê°ì¶•ì¸ì§€ ì˜ˆì‚°ì œ ê´€ë¦¬ì ì‹œìŠ¤í…œ - 2ë‹¨ê³„ ì œì¶œ ê´€ë¦¬</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.5;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #1a365d 0%, #2d3748 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .admin-header h1 {
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .admin-header .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* 2ë‹¨ê³„ ì œì¶œ í”„ë¡œì„¸ìŠ¤ ì‹œê°í™”ë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ */
        .submission-flow {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .flow-title {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .flow-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .flow-step {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 200px;
            position: relative;
        }
        
        .flow-step.active {
            border-color: #3182ce;
            background: #ebf8ff;
        }
        
        .flow-step.completed {
            border-color: #38a169;
            background: #f0fff4;
        }
        
        .flow-arrow {
            font-size: 24px;
            color: #718096;
        }
        
        .step-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .step-description {
            font-size: 12px;
            color: #718096;
            line-height: 1.4;
        }
        
        .step-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #3182ce;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* ë¶€ì²˜ë³„ ìƒì„¸ ì œì¶œ í˜„í™© */
        .ministry-detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .ministry-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .ministry-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            position: relative;
        }
        
        .ministry-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .ministry-summary {
            font-size: 14px;
            opacity: 0.9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ministry-status {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .ministry-status.waiting {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .ministry-status.ready {
            background: #ffd93d;
            color: #744210;
        }
        
        .ministry-status.submitted {
            background: #6bcf7f;
            color: #22543d;
        }
        
        /* ì„¸ë¶€ì‚¬ì—… ëª©ë¡ ìŠ¤íƒ€ì¼ */
        .projects-container {
            padding: 20px;
        }
        
        .projects-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .projects-title {
            font-weight: bold;
            color: #2d3748;
        }
        
        .submission-button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .submission-button.can-submit {
            background: #38a169;
            color: white;
        }
        
        .submission-button.cannot-submit {
            background: #e2e8f0;
            color: #718096;
            cursor: not-allowed;
        }
        
        .submission-button.submitted {
            background: #3182ce;
            color: white;
        }
        
        .projects-list {
            list-style: none;
        }
        
        .project-item {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f7fafc;
        }
        
        .project-item:last-child {
            border-bottom: none;
        }
        
        .project-info {
            flex: 1;
        }
        
        .project-name {
            font-size: 14px;
            color: #2d3748;
            margin-bottom: 4px;
        }
        
        .project-meta {
            font-size: 12px;
            color: #718096;
        }
        
        .project-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            min-width: 60px;
        }
        
        .project-status.draft {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .project-status.submitted {
            background: #dcfce7;
            color: #166534;
        }
        
        .project-status.reviewing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .project-status.feedback {
            background: #dbeafe;
            color: #1e40af;
        }
        
        /* í†µê³„ ëŒ€ì‹œë³´ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid;
        }
        
        .stat-card.projects { border-left-color: #3182ce; }
        .stat-card.ministries { border-left-color: #38a169; }
        .stat-card.submissions { border-left-color: #d69e2e; }
        .stat-card.reviews { border-left-color: #e53e3e; }
        
        .stat-number {
            font-size: 36px;
            font-weight: bold;
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .stat-detail {
            font-size: 12px;
            color: #999;
        }
        
        /* ì•¡ì…˜ ë²„íŠ¼ */
        .action-bar {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary { background: #3182ce; color: white; }
        .btn-success { background: #38a169; color: white; }
        .btn-warning { background: #d69e2e; color: white; }
        .btn-secondary { background: #718096; color: white; }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .flow-diagram {
                flex-direction: column;
                gap: 20px;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
            
            .ministry-detail-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- ê´€ë¦¬ì í—¤ë” -->
            <div class="admin-header">
                <h1>
                    ğŸ¯ ì˜¨ì‹¤ê°€ìŠ¤ê°ì¶•ì¸ì§€ ì˜ˆì‚°ì œ ê´€ë¦¬ì ì‹œìŠ¤í…œ
                </h1>
                <p class="subtitle">2ë‹¨ê³„ ì œì¶œ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ | ì„¸ë¶€ì‚¬ì—…ë³„ â†’ ë¶€ì²˜ë³„ ì œì¶œ í˜„í™© ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</p>
            </div>
            
            <!-- 2ë‹¨ê³„ ì œì¶œ í”„ë¡œì„¸ìŠ¤ ì‹œê°í™” -->
            <div class="submission-flow">
                <h2 class="flow-title">ğŸ“‹ 2ë‹¨ê³„ ì œì¶œ í”„ë¡œì„¸ìŠ¤</h2>
                <div class="flow-diagram">
                    <div class="flow-step completed">
                        <div class="step-count">{{ completedProjects }}</div>
                        <div class="step-title">1ë‹¨ê³„: ì„¸ë¶€ì‚¬ì—…ë³„ ì œì¶œ</div>
                        <div class="step-description">
                            ê°œë³„ ë‹´ë‹¹ìê°€<br>
                            ì„¸ë¶€ì‚¬ì—…ì„ ì‘ì„± ì™„ë£Œ í›„<br>
                            <strong>ê°œë³„ ì œì¶œ</strong>
                        </div>
                    </div>
                    
                    <div class="flow-arrow">â†’</div>
                    
                    <div class="flow-step" :class="{ active: pendingMinistrySubmissions > 0 }">
                        <div class="step-count">{{ readyMinistriesCount }}</div>
                        <div class="step-title">ë¶€ì²˜ ì´ê´„ ê²€í† </div>
                        <div class="step-description">
                            ë¶€ì²˜ ì´ê´„ì´<br>
                            ëª¨ë“  ì„¸ë¶€ì‚¬ì—…ì„ ê²€í†  í›„<br>
                            <strong>ìŠ¹ì¸ ì—¬ë¶€ ê²°ì •</strong>
                        </div>
                    </div>
                    
                    <div class="flow-arrow">â†’</div>
                    
                    <div class="flow-step" :class="{ completed: submittedMinistriesCount > 0 }">
                        <div class="step-count">{{ submittedMinistriesCount }}</div>
                        <div class="step-title">2ë‹¨ê³„: ë¶€ì²˜ë³„ ì œì¶œ</div>
                        <div class="step-description">
                            ë¶€ì²˜ ì´ê´„ì´<br>
                            ìµœì¢… ê²€í†  ì™„ë£Œ í›„<br>
                            <strong>ë¶€ì²˜ ë‹¨ìœ„ ì œì¶œ</strong>
                        </div>
                    </div>
                    
                    <div class="flow-arrow">â†’</div>
                    
                    <div class="flow-step" :class="{ active: submittedMinistriesCount > 0 }">
                        <div class="step-count">{{ reviewingCount }}</div>
                        <div class="step-title">í™˜ê²½ê³µë‹¨ ê²€í† </div>
                        <div class="step-description">
                            í™˜ê²½ê³µë‹¨ì´<br>
                            ë¶€ì²˜ë³„ ì œì¶œ ê±´ë§Œ<br>
                            <strong>ê²€í†  ì§„í–‰</strong>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- í†µê³„ ëŒ€ì‹œë³´ë“œ -->
            <div class="stats-grid">
                <div class="stat-card projects">
                    <div class="stat-number">{{ totalProjects }}</div>
                    <div class="stat-label">ì´ ì„¸ë¶€ì‚¬ì—…</div>
                    <div class="stat-detail">ê°œë³„ ì œì¶œ: {{ completedProjects }}ê°œ ({{ Math.round((completedProjects/totalProjects)*100) }}%)</div>
                </div>
                
                <div class="stat-card ministries">
                    <div class="stat-number">{{ totalMinistries }}</div>
                    <div class="stat-label">ì´ ë¶€ì²˜</div>
                    <div class="stat-detail">ë¶€ì²˜ë³„ ì œì¶œ: {{ submittedMinistriesCount }}ê°œ ë¶€ì²˜</div>
                </div>
                
                <div class="stat-card submissions">
                    <div class="stat-number">{{ readyMinistriesCount }}</div>
                    <div class="stat-label">ì œì¶œ ê°€ëŠ¥ ë¶€ì²˜</div>
                    <div class="stat-detail">ëª¨ë“  ì„¸ë¶€ì‚¬ì—… ì™„ë£Œëœ ë¶€ì²˜</div>
                </div>
                
                <div class="stat-card reviews">
                    <div class="stat-number">{{ reviewingCount }}</div>
                    <div class="stat-label">ê²€í†  ëŒ€ê¸°</div>
                    <div class="stat-detail">í™˜ê²½ê³µë‹¨ ê²€í†  ëŒ€ê¸° ì¤‘</div>
                </div>
            </div>
            
            <!-- ê´€ë¦¬ì ì•¡ì…˜ ë°” -->
            <div class="action-bar">
                <button @click="sendGlobalReminder" class="btn btn-warning">
                    ğŸ“¢ ì „ì²´ ë…ì´‰ ì•Œë¦¼
                </button>
                <button @click="exportCurrentStatus" class="btn btn-secondary">
                    ğŸ“Š í˜„í™© ë³´ê³ ì„œ ìƒì„±
                </button>
                <button @click="advanceToNextRound" class="btn btn-primary" :disabled="!canAdvanceRound">
                    â­ï¸ ë‹¤ìŒ ì°¨ìˆ˜ë¡œ ì§„í–‰
                </button>
                <button @click="extendDeadline" class="btn btn-warning">
                    ğŸ“… ë§ˆê°ì¼ ì—°ì¥
                </button>
            </div>
            
            <!-- ë¶€ì²˜ë³„ ìƒì„¸ ì œì¶œ í˜„í™© -->
            <div class="ministry-detail-grid">
                <div v-for="ministry in ministries" :key="ministry.id" class="ministry-card">
                    <div class="ministry-header">
                        <div class="ministry-name">{{ ministry.name }}</div>
                        <div class="ministry-summary">
                            <span>{{ ministry.completedProjects }}/{{ ministry.totalProjects }} ì„¸ë¶€ì‚¬ì—… ì™„ë£Œ</span>
                        </div>
                        <div class="ministry-status" :class="ministry.submissionStatus">
                            {{ getMinistryStatusText(ministry.submissionStatus) }}
                        </div>
                    </div>
                    
                    <div class="projects-container">
                        <div class="projects-header">
                            <div class="projects-title">ì„¸ë¶€ì‚¬ì—… í˜„í™©</div>
                            <button 
                                @click="toggleMinistrySubmission(ministry)"
                                class="submission-button"
                                :class="getMinistryButtonClass(ministry)"
                                :disabled="!canMinistrySubmit(ministry)"
                            >
                                {{ getMinistryButtonText(ministry) }}
                            </button>
                        </div>
                        
                        <ul class="projects-list">
                            <li v-for="project in ministry.projects" :key="project.id" class="project-item">
                                <div class="project-info">
                                    <div class="project-name">{{ project.name }}</div>
                                    <div class="project-meta">
                                        ë‹´ë‹¹ì: {{ project.manager }} | 
                                        {{ project.submittedAt ? 'ì œì¶œ: ' + formatDate(project.submittedAt) : 'ë¯¸ì œì¶œ' }}
                                    </div>
                                </div>
                                <div class="project-status" :class="project.status">
                                    {{ getProjectStatusText(project.status) }}
                                </div>
                            </li>
                        </ul>
                        
                        <!-- ë¶€ì²˜ë³„ ì„¸ë¶€ ì•¡ì…˜ -->
                        <div style="margin-top: 16px; display: flex; gap: 8px;">
                            <button @click="viewMinistryDetail(ministry)" class="btn btn-secondary" style="flex: 1; font-size: 12px;">
                                ğŸ“Š ìƒì„¸ë³´ê¸°
                            </button>
                            <button @click="sendMinistryReminder(ministry)" class="btn btn-warning" style="flex: 1; font-size: 12px;">
                                ğŸ“¢ ë…ì´‰
                            </button>
                            <button @click="callMinistry(ministry)" class="btn btn-primary" style="flex: 1; font-size: 12px;">
                                ğŸ“ ì—°ë½
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue
        
        createApp({
            data() {
                return {
                    // ë¶€ì²˜ë³„ ìƒì„¸ í˜„í™© (2ë‹¨ê³„ ì œì¶œ êµ¬ì¡°ë¡œ ì¬êµ¬ì„±)
                    ministries: [
                        {
                            id: 1,
                            name: 'í™˜ê²½ë¶€',
                            totalProjects: 5,
                            completedProjects: 5,
                            submissionStatus: 'submitted', // waiting, ready, submitted
                            submittedAt: '2024-12-20 09:30',
                            manager: 'ê¹€í™˜ê²½',
                            projects: [
                                { id: 1, name: 'ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œê¶Œê±°ë˜ì œ ìš´ì˜', status: 'submitted', manager: 'ê¹€ë‹´ë‹¹', submittedAt: '2024-12-18 14:20' },
                                { id: 2, name: 'ì¹œí™˜ê²½ì°¨ ë³´ê¸‰ í™•ì‚°', status: 'submitted', manager: 'ì´ë‹´ë‹¹', submittedAt: '2024-12-19 11:15' },
                                { id: 3, name: 'ì¬ìƒì—ë„ˆì§€ ì¸ì¦ì œë„ ìš´ì˜', status: 'submitted', manager: 'ë°•ë‹´ë‹¹', submittedAt: '2024-12-19 16:45' },
                                { id: 4, name: 'í™˜ê²½ì˜í–¥í‰ê°€ ê°œì„ ', status: 'submitted', manager: 'ìµœë‹´ë‹¹', submittedAt: '2024-12-20 08:30' },
                                { id: 5, name: 'íƒ„ì†Œì¤‘ë¦½ ê¸°ìˆ ê°œë°œ', status: 'submitted', manager: 'ì •ë‹´ë‹¹', submittedAt: '2024-12-20 09:10' }
                            ]
                        },
                        {
                            id: 2,
                            name: 'ì‚°ì—…í†µìƒìì›ë¶€',
                            totalProjects: 7,
                            completedProjects: 7,
                            submissionStatus: 'ready', // ëª¨ë“  ì„¸ë¶€ì‚¬ì—… ì™„ë£Œ, ë¶€ì²˜ ì œì¶œ ëŒ€ê¸°
                            submittedAt: null,
                            manager: 'ì´ì‚°ì—…',
                            projects: [
                                { id: 6, name: 'ì‚°ì—…ë‹¨ì§€ ì—ë„ˆì§€íš¨ìœ¨í™”', status: 'submitted', manager: 'ê¹€ì‚°ì—…', submittedAt: '2024-12-18 13:40' },
                                { id: 7, name: 'ì¤‘ì†Œê¸°ì—… ë…¹ìƒ‰ì „í™˜ ì§€ì›', status: 'submitted', manager: 'ì´ì¤‘ì†Œ', submittedAt: '2024-12-19 10:20' },
                                { id: 8, name: 'ì‹ ì¬ìƒì—ë„ˆì§€ R&D', status: 'submitted', manager: 'ë°•ì‹ ì¬ìƒ', submittedAt: '2024-12-19 15:30' },
                                { id: 9, name: 'ì—ë„ˆì§€ ì‹ ì‚°ì—… ìœ¡ì„±', status: 'submitted', manager: 'ìµœì—ë„ˆì§€', submittedAt: '2024-12-20 08:45' },
                                { id: 10, name: 'ì‚°ì—…ìš© ì „ë ¥ìš”ê¸ˆ ì²´ê³„ ê°œì„ ', status: 'submitted', manager: 'ì •ì „ë ¥', submittedAt: '2024-12-20 09:15' },
                                { id: 11, name: 'ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬ í™•ì‚°', status: 'submitted', manager: 'ì¡°ìŠ¤ë§ˆíŠ¸', submittedAt: '2024-12-20 10:30' },
                                { id: 12, name: 'íƒ„ì†Œêµ­ê²½ì¡°ì • ëŒ€ì‘', status: 'submitted', manager: 'ìœ¤íƒ„ì†Œ', submittedAt: '2024-12-20 11:20' }
                            ]
                        },
                        {
                            id: 3,
                            name: 'êµ­í† êµí†µë¶€',
                            totalProjects: 4,
                            completedProjects: 3,
                            submissionStatus: 'waiting', // ì•„ì§ ì„¸ë¶€ì‚¬ì—… ì œì¶œ ë¯¸ì™„ë£Œ
                            submittedAt: null,
                            manager: 'ë°•êµí†µ',
                            projects: [
                                { id: 13, name: 'ì¹œí™˜ê²½ ëŒ€ì¤‘êµí†µ í™•ëŒ€', status: 'submitted', manager: 'ê¹€ëŒ€ì¤‘êµí†µ', submittedAt: '2024-12-19 14:10' },
                                { id: 14, name: 'ê±´ë¬¼ ì—ë„ˆì§€íš¨ìœ¨ ê°œì„ ', status: 'submitted', manager: 'ì´ê±´ë¬¼', submittedAt: '2024-12-20 09:40' },
                                { id: 15, name: 'ìŠ¤ë§ˆíŠ¸ êµí†µì‹œìŠ¤í…œ êµ¬ì¶•', status: 'submitted', manager: 'ë°•ìŠ¤ë§ˆíŠ¸', submittedAt: '2024-12-20 10:15' },
                                { id: 16, name: 'ì¹œí™˜ê²½ ë¬¼ë¥˜ì²´ê³„ êµ¬ì¶•', status: 'draft', manager: 'ìµœë¬¼ë¥˜', submittedAt: null }
                            ]
                        },
                        {
                            id: 4,
                            name: 'ë†ë¦¼ì¶•ì‚°ì‹í’ˆë¶€',
                            totalProjects: 6,
                            completedProjects: 4,
                            submissionStatus: 'waiting',
                            submittedAt: null,
                            manager: 'ìµœë†ë¦¼',
                            projects: [
                                { id: 17, name: 'íƒ„ì†Œì¤‘ë¦½ ë†ì—…ê¸°ìˆ  ê°œë°œ', status: 'submitted', manager: 'ê¹€ë†ì—…', submittedAt: '2024-12-18 16:20' },
                                { id: 18, name: 'ì¹œí™˜ê²½ ë†ì—… í™•ì‚°', status: 'submitted', manager: 'ì´ì¹œí™˜ê²½', submittedAt: '2024-12-19 12:30' },
                                { id: 19, name: 'ì‚°ë¦¼ íƒ„ì†Œí¡ìˆ˜ì› í™•ì¶©', status: 'submitted', manager: 'ë°•ì‚°ë¦¼', submittedAt: '2024-12-19 17:45' },
                                { id: 20, name: 'ì¶•ì‚°ì—… ì˜¨ì‹¤ê°€ìŠ¤ ê°ì¶•', status: 'submitted', manager: 'ìµœì¶•ì‚°', submittedAt: '2024-12-20 08:15' },
                                { id: 21, name: 'ë†ì´Œ ì—ë„ˆì§€ ìë¦½ë§ˆì„ ì¡°ì„±', status: 'draft', manager: 'ì •ë†ì´Œ', submittedAt: null },
                                { id: 22, name: 'ë†ì—…ìš©ìˆ˜ íš¨ìœ¨í™”', status: 'reviewing', manager: 'ì¡°ìš©ìˆ˜', submittedAt: '2024-12-17 14:30' }
                            ]
                        }
                    ]
                }
            },
            
            computed: {
                // ì „ì²´ í†µê³„ ê³„ì‚°
                totalProjects() {
                    return this.ministries.reduce((sum, ministry) => sum + ministry.totalProjects, 0);
                },
                
                completedProjects() {
                    return this.ministries.reduce((sum, ministry) => 
                        sum + ministry.projects.filter(p => p.status === 'submitted').length, 0
                    );
                },
                
                totalMinistries() {
                    return this.ministries.length;
                },
                
                // ë¶€ì²˜ë³„ ì œì¶œ ê°€ëŠ¥í•œ ê³³ (ëª¨ë“  ì„¸ë¶€ì‚¬ì—…ì´ ì™„ë£Œëœ ë¶€ì²˜)
                readyMinistriesCount() {
                    return this.ministries.filter(m => m.submissionStatus === 'ready').length;
                },
                
                // ë¶€ì²˜ë³„ ì œì¶œ ì™„ë£Œëœ ê³³
                submittedMinistriesCount() {
                    return this.ministries.filter(m => m.submissionStatus === 'submitted').length;
                },
                
                // í™˜ê²½ê³µë‹¨ ê²€í†  ëŒ€ê¸° ê±´ìˆ˜
                reviewingCount() {
                    return this.submittedMinistriesCount;
                },
                
                // ë‹¤ìŒ ì°¨ìˆ˜ ì§„í–‰ ê°€ëŠ¥ ì—¬ë¶€
                canAdvanceRound() {
                    return this.submittedMinistriesCount === this.totalMinistries;
                },
                
                // ë¶€ì²˜ë³„ ì œì¶œ ëŒ€ê¸° ê±´ìˆ˜
                pendingMinistrySubmissions() {
                    return this.readyMinistriesCount;
                }
            },
            
            methods: {
                // ë¶€ì²˜ë³„ ì œì¶œ ìƒíƒœ í† ê¸€
                toggleMinistrySubmission(ministry) {
                    if (ministry.submissionStatus === 'ready') {
                        ministry.submissionStatus = 'submitted';
                        ministry.submittedAt = new Date().toISOString().slice(0, 16).replace('T', ' ');
                        alert(`${ministry.name}ì´ ë¶€ì²˜ë³„ ì œì¶œì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ì´ì œ í™˜ê²½ê³µë‹¨ ê²€í†  ëŒ€ìƒì…ë‹ˆë‹¤.`);
                    } else if (ministry.submissionStatus === 'submitted') {
                        ministry.submissionStatus = 'ready';
                        ministry.submittedAt = null;
                        alert(`${ministry.name}ì˜ ë¶€ì²˜ë³„ ì œì¶œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                    }
                },
                
                // ë¶€ì²˜ë³„ ì œì¶œ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
                canMinistrySubmit(ministry) {
                    if (ministry.submissionStatus === 'submitted') return true; // ì œì¶œ ì·¨ì†Œ ê°€ëŠ¥
                    return ministry.submissionStatus === 'ready'; // ëª¨ë“  ì„¸ë¶€ì‚¬ì—… ì™„ë£Œ ì‹œë§Œ ì œì¶œ ê°€ëŠ¥
                },
                
                // ë¶€ì²˜ ìƒíƒœë³„ ë²„íŠ¼ í´ë˜ìŠ¤
                getMinistryButtonClass(ministry) {
                    if (ministry.submissionStatus === 'submitted') return 'submitted';
                    if (ministry.submissionStatus === 'ready') return 'can-submit';
                    return 'cannot-submit';
                },
                
                // ë¶€ì²˜ ìƒíƒœë³„ ë²„íŠ¼ í…ìŠ¤íŠ¸
                getMinistryButtonText(ministry) {
                    if (ministry.submissionStatus === 'submitted') return 'ì œì¶œì™„ë£Œ âœ“';
                    if (ministry.submissionStatus === 'ready') return 'ë¶€ì²˜ ì œì¶œí•˜ê¸°';
                    return `ëŒ€ê¸°ì¤‘ (${ministry.completedProjects}/${ministry.totalProjects})`;
                },
                
                // ë¶€ì²˜ ìƒíƒœ í…ìŠ¤íŠ¸
                getMinistryStatusText(status) {
                    const statusMap = {
                        'waiting': 'ëŒ€ê¸°ì¤‘',
                        'ready': 'ì œì¶œê°€ëŠ¥',
                        'submitted': 'ì œì¶œì™„ë£Œ'
                    };
                    return statusMap[status] || status;
                },
                
                // ì„¸ë¶€ì‚¬ì—… ìƒíƒœ í…ìŠ¤íŠ¸
                getProjectStatusText(status) {
                    const statusMap = {
                        'draft': 'ì‘ì„±ì¤‘',
                        'submitted': 'ì œì¶œì™„ë£Œ',
                        'reviewing': 'ìˆ˜ì •ìš”ì²­',
                        'feedback': 'í”¼ë“œë°±'
                    };
                    return statusMap[status] || status;
                },
                
                // ì „ì²´ ë…ì´‰ ì•Œë¦¼
                sendGlobalReminder() {
                    const uncompletedMinistries = this.ministries.filter(m => m.submissionStatus !== 'submitted');
                    alert(`${uncompletedMinistries.length}ê°œ ë¶€ì²˜ì— ì „ì²´ ë…ì´‰ ì•Œë¦¼ì„ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.`);
                },
                
                // í˜„í™© ë³´ê³ ì„œ ìƒì„±
                exportCurrentStatus() {
                    alert('ë¶€ì²˜ë³„ ì„¸ë¶€ì‚¬ì—… í˜„í™© ë³´ê³ ì„œë¥¼ Excelë¡œ ìƒì„±í•©ë‹ˆë‹¤.');
                },
                
                // ë‹¤ìŒ ì°¨ìˆ˜ ì§„í–‰
                advanceToNextRound() {
                    if (this.canAdvanceRound) {
                        alert('ëª¨ë“  ë¶€ì²˜ì˜ ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì°¨ìˆ˜ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.');
                    } else {
                        alert('ì•„ì§ ì œì¶œí•˜ì§€ ì•Šì€ ë¶€ì²˜ê°€ ìˆìŠµë‹ˆë‹¤.');
                    }
                },
                
                // ë§ˆê°ì¼ ì—°ì¥
                extendDeadline() {
                    const days = prompt('ëª‡ ì¼ ì—°ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', '3');
                    if (days && !isNaN(days)) {
                        alert(`ë§ˆê°ì¼ì´ ${days}ì¼ ì—°ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ë¶€ì²˜ì— ì•Œë¦¼ì„ ë°œì†¡í•©ë‹ˆë‹¤.`);
                    }
                },
                
                // ë¶€ì²˜ë³„ ìƒì„¸ë³´ê¸°
                viewMinistryDetail(ministry) {
                    alert(`${ministry.name} ìƒì„¸ í˜„í™© í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
                },
                
                // ë¶€ì²˜ë³„ ë…ì´‰
                sendMinistryReminder(ministry) {
                    if (ministry.submissionStatus === 'waiting') {
                        const incompleteProjects = ministry.projects.filter(p => p.status !== 'submitted');
                        alert(`${ministry.name}ì— ë¯¸ì™„ë£Œ ì„¸ë¶€ì‚¬ì—… ${incompleteProjects.length}ê±´ì— ëŒ€í•œ ë…ì´‰ ì•Œë¦¼ì„ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.`);
                    } else if (ministry.submissionStatus === 'ready') {
                        alert(`${ministry.name} ì´ê´„ì—ê²Œ ë¶€ì²˜ë³„ ì œì¶œ ë…ì´‰ ì•Œë¦¼ì„ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.`);
                    }
                },
                
                // ë¶€ì²˜ ì—°ë½
                callMinistry(ministry) {
                    alert(`${ministry.name} ë‹´ë‹¹ì ${ministry.manager}ì—ê²Œ ìœ ì„  ì—°ë½ì„ ì§„í–‰í•©ë‹ˆë‹¤.`);
                },
                
                // ë‚ ì§œ í¬ë§·íŒ…
                formatDate(dateString) {
                    if (!dateString) return 'ë¯¸ì œì¶œ';
                    return new Date(dateString).toLocaleString('ko-KR');
                }
            },
            
            // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì‹¤í–‰
            mounted() {
                // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ì£¼ê¸°ì  ë°ì´í„° ê°±ì‹  (ì‹¤ì œë¡œëŠ” WebSocket ë“± ì‚¬ìš©)
                setInterval(() => {
                    // ê° ë¶€ì²˜ì˜ ì œì¶œ ìƒíƒœ ìë™ ì—…ë°ì´íŠ¸
                    this.ministries.forEach(ministry => {
                        const completedCount = ministry.projects.filter(p => p.status === 'submitted').length;
                        ministry.completedProjects = completedCount;
                        
                        // ëª¨ë“  ì„¸ë¶€ì‚¬ì—…ì´ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ 'ready' ìƒíƒœë¡œ ë³€ê²½
                        if (completedCount === ministry.totalProjects && ministry.submissionStatus === 'waiting') {
                            ministry.submissionStatus = 'ready';
                        }
                    });
                }, 30000); // 30ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
            }
        }).mount('#app')
    </script>
</body>
</html> 